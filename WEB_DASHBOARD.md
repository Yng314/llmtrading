# Web Dashboard 使用指南

## 🎨 功能特性

### 左侧面板：实时图表
- **统计卡片**：总价值、P&L、ROI、胜率
- **账户价值走势图**：实时显示账户总价值变化
- **加密货币价格图**：多币种价格走势对比

### 右侧面板：交易信息
- **持仓信息**：当前所有开仓位置，实时盈亏
- **交易历史**：最近完成的交易记录

## 🚀 启动方式

### 方法1：直接运行Web版本（推荐）

```bash
python main_with_web.py
```

然后在浏览器中打开：
```
http://127.0.0.1:5000
```

### 方法2：单独运行（调试用）

**终端1 - 运行交易机器人：**
```bash
python main.py
```

**终端2 - 运行Web服务器：**
```bash
python web_server.py
```

## 📊 界面说明

### 顶部状态栏
- 🟢 **Running 指示灯**：实时跳动表示系统正在运行
- ⏰ **Last Update**：最后数据更新时间

### 统计卡片（紫色渐变）
| 卡片 | 说明 |
|------|------|
| Total Value | 账户总价值（包含持仓） |
| P&L | 总盈亏（绿色正/红色负） |
| ROI | 投资回报率 |
| Win Rate | 胜率百分比 |

### 账户价值走势图
- **蓝色曲线**：显示账户总价值随时间变化
- **填充区域**：更直观地看到趋势
- **自动更新**：每2秒刷新一次

### 加密货币价格图
- **多条曲线**：每个币种用不同颜色
- **图例**：点击可显示/隐藏特定币种
- **悬停提示**：鼠标悬停显示具体数值

### 持仓信息卡
每个持仓显示：
- **Symbol**：币种名称（如BTCUSDT）
- **Type Badge**：LONG（绿色）/ SHORT（红色）
- **Size**：仓位大小（USD）
- **Leverage**：杠杆倍数
- **Entry**：开仓价格
- **Current**：当前价格
- **P&L**：当前未实现盈亏（实时更新，绿色/红色）

### 交易历史卡
显示最近10笔完成的交易：
- **Entry/Exit**：开仓和平仓价格
- **Size & Leverage**：交易规模和杠杆
- **P&L**：已实现盈亏

## 🎯 实时更新机制

Dashboard每**2秒**自动从服务器获取最新数据：
- ✅ 价格更新
- ✅ 持仓变化
- ✅ 账户统计
- ✅ 交易记录

**无需刷新页面**，所有数据自动更新！

## 💡 使用技巧

### 1. 多屏监控
在浏览器中打开Dashboard，同时看终端日志：
- **浏览器**：直观的图表和数据
- **终端**：详细的LLM决策过程

### 2. 价格图表交互
- **缩放**：鼠标滚轮可缩放图表
- **隐藏币种**：点击图例可临时隐藏某个币种
- **悬停查看**：鼠标移到曲线上可看具体数值

### 3. 多标签页
可以打开多个浏览器标签页，都会同步显示相同数据

### 4. 移动设备访问
在同一局域网内，可以用手机访问：
```
http://你的电脑IP:5000
```

例如：`http://192.168.1.100:5000`

要允许局域网访问，修改 `main_with_web.py` 中的：
```python
run_server(host='0.0.0.0', port=5000, debug=False)
```

## 🎨 界面配色

- **主色调**：紫色渐变（#667eea → #764ba2）
- **盈利**：绿色（#10b981）
- **亏损**：红色（#ef4444）
- **背景**：毛玻璃效果，现代化设计

## 🐛 故障排除

### Dashboard无法访问
1. 检查是否运行了 `main_with_web.py`
2. 确认终端没有报错
3. 尝试 `http://localhost:5000`

### 数据不更新
1. 检查终端是否有错误信息
2. 确认交易机器人正在运行
3. 查看浏览器控制台（F12）的错误信息

### 图表显示异常
1. 清除浏览器缓存
2. 刷新页面（Ctrl+F5）
3. 尝试其他浏览器（Chrome/Firefox）

## 📱 浏览器兼容性

| 浏览器 | 兼容性 |
|--------|--------|
| Chrome | ✅ 完美支持 |
| Firefox | ✅ 完美支持 |
| Edge | ✅ 完美支持 |
| Safari | ✅ 支持 |
| IE | ❌ 不支持 |

## 🔧 自定义配置

### 修改刷新频率

编辑 `templates/dashboard.html` 最底部：
```javascript
// 默认2秒刷新，改为5秒
setInterval(fetchData, 5000);
```

### 修改端口

编辑 `main_with_web.py`：
```python
run_server(host='127.0.0.1', port=8080, debug=False)
```

### 修改图表颜色

编辑 `templates/dashboard.html` 中的 `colors` 数组：
```javascript
const colors = ['#667eea', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6'];
```

## 📸 界面预览

```
┌─────────────────────────────────────────────────────────────┐
│ 🚀 LLM Crypto Trading Dashboard                            │
│ 🟢 Running  |  ⏰ Last update: 18:30:45                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┬──────────┬──────────┬──────────┐            │
│  │Total Val │   P&L    │   ROI    │ Win Rate │            │
│  │ $1,001.50│  +$1.50  │  +0.15%  │  60.0%   │            │
│  └──────────┴──────────┴──────────┴──────────┘            │
│                                                             │
│  ┌─────────── Account Value ──────────────────┐            │
│  │        📈 实时价值走势图                     │            │
│  │                                             │            │
│  └─────────────────────────────────────────────┘            │
│                                                             │
│  ┌────── Cryptocurrency Prices ──────────────┐            │
│  │        📊 多币种价格对比图                  │ │ Open Positions │
│  │                                             │ │                │
│  └─────────────────────────────────────────────┘ │ 📌 BTC LONG   │
│                                                  │    $200        │
│                                                  │    P&L: +$0.46 │
│                                                  │                │
│                                                  │ Recent Trades  │
│                                                  │                │
│                                                  │ ✅ ETH LONG    │
│                                                  │    P&L: +$5.20 │
└──────────────────────────────────────────────────┴────────────────┘
```

## 🎉 开始使用

现在就运行：
```bash
python main_with_web.py
```

在浏览器打开：**http://127.0.0.1:5000**

享受可视化交易体验！🚀

